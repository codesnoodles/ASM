# 微处理器系统结构和技术
----
1.8086/8088的特点以及内部结构
2.物理地址与逻辑地址的关系　
3.访问存储器类型

----
## cisc和risc技术
----
### cisc
是一种较早的微处理器设计架构，8086/8088均用的是cisc复杂指令集系统，有以下特点：
* 复杂指令：弊端cisc设计了一些很复杂的指令，增加了处理器设计的难度，还提高了成本，使得处理器译码单元的饭、工作加重，降低了处理器运行的速度。
* 复杂的内存定位法：==直接寻址，基址寻址，变址寻址，基址加变址寻址等==
* 微程序结构：基于微操作指令的一种结构。

### risc
精简指令集 计算机，有以下特点：
* 缩短指令长度，规范指令格式
* 简化寻址方式，都采用寄存器寻址方式
* 适当增加通用寄存器数量，大量利用寄存器间操作。

## 16位处理器的系统结构
----
### 8086/8088 cpu内部组成结构 

内部可以分为两个独立的功能单元，总线接口单元（biu），和执行单元（eu）。

* 总线接口单元：基本功能是负责cpu与存储器或者i/o端口之间的数据传送。具有4个段寄存器：
	* 代码段寄存器cs
	* 数据段寄存器ds
	* 堆栈段寄存器ss
	* 附加段寄存器es

还有6字节指令缓冲器，20位地址加法器和总线控制电路：

	1. 指令缓冲器，有六个字节的寄存器组成，最多可以存入六个字节的指令代码，而8088的指令队列只有四个字节。采用先进先出的原则。
	2. 地址加法器和段寄存器，由段寄存器的16位提供20位地址的高16位也就是段起始地址，再有16位偏移地址得出物理地址。
	3. 16位指令指针，ip中的地址含有biu要取得的下一条指令的偏移地址。

* 执行单元eu：从指令队列中取出指令，然后分析和执行指令 。。由以下部件组成：
	* 16位算数逻辑单元，进行算数逻辑运算，也可以通过寻址方式计算出寻址单元的16位偏移量。
	* 16位标志寄存器
	* 数据暂存寄存器
	* 通用寄存器组：4个16位寄存器，ax bx cx dx和4个16位指针和变址寄存器：sp、bp、si、di、
	* eu控制电路他是控制定时和状态逻辑电路。

### 8086/8088 cpu的寄存器结构 

通用寄存器：
* 数据寄存器：ax bx cx dx
* 指针寄存器和变址寄存器：bp sp si di，用来存放偏移地址。

段寄存器：用来存取段地址，再由段寄存器左移四位形成20位的起始地址，每个逻辑段长度为64k

标志寄存器：16位用了9位作为标志。具体标准如下表格。

六个状态标志位及其说明：

|状态标志位|名称|状态及说明|
|-----|-----|-----|
|cf$D_0$|进位标志|cf=1加法或减法运算使得最高位产生进位或者借位，cf=0则没有进位或者借位|
|pf$D_2$|奇偶性标志|pf=1 档逻辑运算结果第八位含有偶数个一，pf=0 第八位含有奇数个1|
|af$D_4$|辅助进位标志|af=1执行加法运算使结果$D_3$向$D_4$有进借位，af=0则没有|
|zf$D_6$|零标志|zf=1 运算结果位0 zf=0运算结果不为0 |
|sf$D_7$|符号标志|sf=1 运算结果在高位为1，sf=0 运算结果最高位为0|
|of$D_{11}$|溢出标志|of=1 补码运算有溢出，of=0 补码运算无溢出|

三个控制标志位的状态及其说明：

|控制标志位|名称|设置含义及其说明|
|----|-----|------|
|df|方向标志|df=1，std指令将其置一，则数据传操作中地址自动递减，df=0，使用cld指令将其清零，数据传操作中自动递增|
|if|中断允许标志|if=1，使用sti指令置一，则允许cpu接受中断请求。if=0，使用cld指令清零，则禁止cpu接受中断请求|
|tf|跟踪标志|th=1表示8086/8088cpu处于单步工作方式|

### 8086/8088 总线周期

总线周期指的是微处理器操作时所依据的一个基准时间段。总线周期由4个时钟周期组成称为$T_1$$T_2$$T_3$$T_4$,四个状态，每个状态中，cpu的状态都不同。$T_1$状态，cpu向多路复用总线上发送地址信息，选中，某个存储器单元或者端口地址。$T_2$，cpu从总线上撤销地址，为接收数据做准备，$T_3$多路总线的高4位提供状态信息，低16位上将出现cpu读入或写出的数据。$T_4$cpu完成对数据线采样，完成本次读写操作。结束总线周期。
若存储器速度跟不上cpu则会在$T_3$之后添加$T_w$直到外设准备后 数据。

### 8086/8088引脚信号和功能

1. 地址/数据总线$AD_{15}$~$AD_{0}$:分时复用的存储器的端口地址和数据线。
2. 地址/状态总线$A_{19}$$S_6$$A_{16}$$S_3$:$S_4$$S_3$组合得到现在在使用哪个段寄存器：

|$S_4$$S_3$|状态|
|----|----|
|00|当前使用es|
|01|当前使用ss|
|10|当前使用cs，或未使用任何段寄存器|
|11|当前使用ds|

## 8086/8088 系统最小，最大工作方式
-----
### 最小方式
MN ram容量小，不便于拓展，控制信号由cpu直接发出。
### 最大工作方式
MX ram容量大，但是需要驱动电路，便于拓展，需要总线控制器8288

## 80886/8088的存储器与i/o组织
----
### 存储器组织

有20条地址线，可以寻址1MB的存储空间，分为两个512KB的存储库，分为，低位库与高位库。低位库偶地址，高位库奇地址。

### 存储器的分段

段基址是有段寄存器内的字节左移得到。

### 实际地址和逻辑地址
实际地址，即物理地址，为20位二进制，逻辑地址则为两部分，包括段地址，和偏移地址。段地址左移四位，再加上偏移地址就是逻辑地址。

逻辑地址源：
|存储器操作涉及的类型|正常使用的段地址|可能被使用的段地址|偏移地址|
|----|----|----|----|
|取指令|cs|无|ip|
|堆栈操作|ss|无|sp|
|变量|ds|csesss|有效地址|
|源数据串|ds|csesss|si|
|目标数据串|es|无|di|
|作为堆栈基址寄存器使用的bp|ss|csdses|有效地址|

### 堆栈

堆栈由堆栈段寄存器ss和堆栈指针sp来寻址。


